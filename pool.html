<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LATAKIANO - REAL 8 BALL</title>
    <style>
        body { background: #000; margin: 0; display: flex; align-items: center; justify-content: center; height: 100vh; overflow: hidden; }
        canvas { 
            background: #0b5327; 
            border: 20px solid #4a2c16; 
            border-radius: 15px; 
            box-shadow: inset 0 0 100px #000, 0 30px 60px rgba(0,0,0,0.8);
            cursor: none; 
        }
    </style>
</head>
<body>
    <canvas id="poolCanvas" width="940" height="480"></canvas>

<script>
    const canvas = document.getElementById('poolCanvas');
    const ctx = canvas.getContext('2d');
    let balls = [];
    let mouse = { x: 0, y: 0 };
    let isMoving = false;

    function init() {
        balls = [];
        // الكرة البيضاء
        balls.push({ x: 250, y: 240, r: 15, vx: 0, vy: 0, color: '#fff', num: '' });
        
        // مثلث الكرات مع الألوان الرسمية والأرقام
        let startX = 650, startY = 240, spacing = 31;
        let ballColors = ["#f1c40f", "#2980b9", "#e74c3c", "#8e44ad", "#e67e22", "#27ae60", "#c0392b", "#000", "#f1c40f", "#2980b9", "#e74c3c", "#8e44ad", "#e67e22", "#27ae60", "#c0392b"];
        let count = 0;
        for (let i = 0; i < 5; i++) {
            for (let j = 0; j <= i; j++) {
                balls.push({
                    x: startX + i * 27,
                    y: startY - (i * spacing / 2) + j * spacing,
                    r: 15, vx: 0, vy: 0,
                    color: ballColors[count],
                    num: count + 1
                });
                count++;
            }
        }
    }

    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // رسم الثقوب (Pockets) بشكل احترافي
        ctx.fillStyle = '#050505';
        [[0,0], [470,0], [940,0], [0,480], [470,480], [940,480]].forEach(p => {
            ctx.beginPath(); ctx.arc(p[0], p[1], 35, 0, Math.PI*2); ctx.fill();
        });

        isMoving = false;
        balls.forEach((b, i) => {
            // فيزياء الحركة
            b.x += b.vx; b.y += b.vy;
            b.vx *= 0.99; b.vy *= 0.99;
            if(Math.abs(b.vx) > 0.1 || Math.abs(b.vy) > 0.1) isMoving = true;

            // التصادم مع الجدران
            if (b.x < b.r || b.x > canvas.width - b.r) b.vx *= -0.8;
            if (b.y < b.r || b.y > canvas.height - b.r) b.vy *= -0.8;

            // رسم الكرة بتأثير 3D
            let grad = ctx.createRadialGradient(b.x-5, b.y-5, 2, b.x, b.y, b.r);
            grad.addColorStop(0, '#fff'); grad.addColorStop(0.4, b.color); grad.addColorStop(1, '#000');
            ctx.fillStyle = grad;
            ctx.beginPath(); ctx.arc(b.x, b.y, b.r, 0, Math.PI*2); ctx.fill();

            // رسم دائرة الرقم (لتبدو واقعية)
            if(b.num !== '') {
                ctx.fillStyle = 'white';
                ctx.beginPath(); ctx.arc(b.x, b.y, 7, 0, Math.PI*2); ctx.fill();
                ctx.fillStyle = 'black';
                ctx.font = 'bold 10px Arial'; ctx.textAlign = 'center';
                ctx.fillText(b.num, b.x, b.y + 4);
            }
            
            // تصادم الكرات
            for (let j = i + 1; j < balls.length; j++) {
                let b2 = balls[j];
                let dx = b2.x - b.x, dy = b2.y - b.y, dist = Math.hypot(dx, dy);
                if (dist < b.r + b2.r) {
                    let angle = Math.atan2(dy, dx);
                    let tempVx = b.vx; b.vx = b2.vx; b2.vx = tempVx;
                    let tempVy = b.vy; b.vy = b2.vy; b2.vy = tempVy;
                }
            }
        });

        // رسم العصا الخشبية (فقط عندما تتوقف الكرات)
        if (!isMoving) {
            let b = balls[0];
            let angle = Math.atan2(mouse.y - b.y, mouse.x - b.x);
            ctx.save();
            ctx.translate(b.x, b.y);
            ctx.rotate(angle);
            // العصا
            let cueGrad = ctx.createLinearGradient(40, -5, 40, 5);
            cueGrad.addColorStop(0, '#5d3a1a'); cueGrad.addColorStop(0.5, '#deb887'); cueGrad.addColorStop(1, '#5d3a1a');
            ctx.fillStyle = cueGrad;
            ctx.fillRect(40, -5, 300, 10);
            ctx.fillStyle = '#fff'; ctx.fillRect(40, -5, 15, 10); // رأس العصا
            ctx.restore();
        }

        requestAnimationFrame(draw);
    }

    canvas.onmousemove = (e) => {
        const rect = canvas.getBoundingClientRect();
        mouse.x = e.clientX - rect.left; mouse.y = e.clientY - rect.top;
    };

    canvas.onmousedown = () => {
        if(!isMoving) {
            let b = balls[0];
            let angle = Math.atan2(b.y - mouse.y, b.x - mouse.x);
            b.vx = Math.cos(angle) * 20; b.vy = Math.sin(angle) * 20;
        }
    };

    init();
    draw();
</script>
</body>
</html>