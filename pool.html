<!DOCTYPE html>
<html>
<head>
    <title>LATAKIANO PRO POOL</title>
    <style>
        body { background: #111; margin: 0; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; font-family: sans-serif; }
        #game-container { position: relative; border: 20px solid #3d2616; border-radius: 20px; box-shadow: 0 0 100px #000; }
        canvas { background: #0b5327; cursor: crosshair; }
        
        /* عصا القوة الجانبية */
        #power-bar-container { position: absolute; right: -60px; top: 50px; width: 30px; height: 300px; background: #222; border: 2px solid #444; border-radius: 5px; }
        #power-level { position: absolute; bottom: 0; width: 100%; height: 0%; background: linear-gradient(to top, #4caf50, #ffeb3b, #f44336); transition: 0.1s; }
        .label { position: absolute; right: -70px; top: 20px; color: white; transform: rotate(90deg); font-weight: bold; }
    </style>
</head>
<body>

<div id="game-container">
    <div class="label">POWER GAUGE</div>
    <div id="power-bar-container"><div id="power-level"></div></div>
    <canvas id="poolCanvas" width="900" height="450"></canvas>
</div>

<script>
    const canvas = document.getElementById('poolCanvas');
    const ctx = canvas.getContext('2d');
    const powerLevelEl = document.getElementById('power-level');
    
    let power = 0;
    let isCharging = false;
    let balls = [];

    // إنشاء كرات بلمعان احترافي
    function createBall(x, y, color, type = 'target') {
        return { x, y, r: 14, vx: 0, vy: 0, color, type };
    }

    function init() {
        balls = [createBall(250, 225, '#fff', 'cue')];
        // مثلث الكرات
        for(let i=0; i<5; i++) {
            for(let j=0; j<=i; j++) {
                balls.push(createBall(600 + i*26, 225 - (i*13) + j*26, `hsl(${i*50 + j*20}, 70%, 50%)`));
            }
        }
    }

    function draw() {
        ctx.fillStyle = '#0b5327'; // لون الطاولة
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        // رسم الثقوب بظل داخلي
        ctx.fillStyle = '#000';
        [[0,0], [450,0], [900,0], [0,450], [450,450], [900,450]].forEach(p => {
            ctx.beginPath(); ctx.arc(p[0], p[1], 35, 0, Math.PI*2); ctx.fill();
        });

        balls.forEach(b => {
            // تأثير الكرة الزجاجية 3D
            let grad = ctx.createRadialGradient(b.x-5, b.y-5, 2, b.x, b.y, b.r);
            grad.addColorStop(0, '#fff');
            grad.addColorStop(0.3, b.color);
            grad.addColorStop(1, '#000');
            
            ctx.fillStyle = grad;
            ctx.beginPath(); ctx.arc(b.x, b.y, b.r, 0, Math.PI*2); ctx.fill();
            
            // فيزياء الحركة
            b.x += b.vx; b.y += b.vy;
            b.vx *= 0.985; b.vy *= 0.985;
            
            if(b.x < 20 || b.x > 880) b.vx *= -0.8;
            if(b.y < 20 || b.y > 430) b.vy *= -0.8;
        });

        if(isCharging) {
            power = (power + 1.5) % 100;
            powerLevelEl.style.height = power + '%';
        }
        requestAnimationFrame(draw);
    }

    window.onkeydown = (e) => { if(e.code === 'Space') isCharging = true; };
    window.onkeyup = (e) => {
        if(e.code === 'Space') {
            balls[0].vx = power * 0.2; // إطلاق الكرة بقوة العصا الجانبية
            isCharging = false;
            power = 0;
            powerLevelEl.style.height = '0%';
        }
    };

    init();
    draw();
</script>
</body>
</html>