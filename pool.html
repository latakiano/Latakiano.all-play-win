<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LATAKIANO Premium Billiards</title>
    <style>
        body { background: #050505; color: white; text-align: center; font-family: 'Segoe UI', sans-serif; margin: 0; }
        .header { padding: 15px; background: linear-gradient(to bottom, #222, #000); border-bottom: 2px solid #4caf50; }
        #scoreBoard { font-size: 1.8rem; color: #4caf50; text-shadow: 0 0 10px rgba(76,175,80,0.5); }
        canvas { 
            background: radial-gradient(circle, #1a7d32 0%, #074016 100%); /* لون طاولة واقعي */
            border: 18px solid #3d2616; 
            border-radius: 25px; 
            box-shadow: inset 0 0 50px #000, 0 20px 50px rgba(0,0,0,0.8);
            margin-top: 20px;
            cursor: crosshair;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1 style="margin:0; letter-spacing:3px;">LATAKIANO LUXURY POOL</h1>
        <div id="scoreBoard">Score: 0</div>
    </div>
    
    <canvas id="poolCanvas" width="900" height="450"></canvas>

    <script>
        const canvas = document.getElementById('poolCanvas');
        const ctx = canvas.getContext('2d');
        let score = 0;
        let balls = [];

        function initGame() {
            balls = [];
            // كرة بيضاء بلمعان واقعي
            balls.push({ x: 250, y: 225, r: 13, vx: 0, vy: 0, color: '#ffffff', type: 'cue' });
            
            let startX = 600, startY = 225, spacing = 28;
            for (let i = 0; i < 5; i++) {
                for (let j = 0; j <= i; j++) {
                    // توزيع ألوان البلياردو الأصلية
                    let colors = ['#f1c40f', '#2980b9', '#e74c3c', '#8e44ad', '#e67e22', '#27ae60', '#c0392b', '#2c3e50'];
                    balls.push({
                        x: startX + i * (spacing - 2),
                        y: startY - (i * spacing / 2) + j * spacing,
                        r: 13, vx: 0, vy: 0,
                        color: colors[(i+j) % colors.length],
                        type: 'target'
                    });
                }
            }
        }

        function drawBall(b) {
            // إضافة إضاءة (3D effect) لكل كرة
            let gradient = ctx.createRadialGradient(b.x - 4, b.y - 4, 2, b.x, b.y, b.r);
            gradient.addColorStop(0, '#fff'); // نقطة اللمعان
            gradient.addColorStop(0.2, b.color);
            gradient.addColorStop(1, '#000'); // الظل السفلي

            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(b.x, b.y, b.r, 0, Math.PI * 2);
            ctx.fill();
            ctx.closePath();
        }

        // نفس منطق الحركة السابق مع تحسين الاصطدام والجدران
        function update() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // رسم ثقوب فخمة
            ctx.fillStyle = '#0a0a0a';
            [[0,0], [450,0], [900,0], [0,450], [450,450], [900,450]].forEach(p => {
                ctx.beginPath(); ctx.arc(p[0], p[1], 35, 0, Math.PI*2); ctx.fill();
                ctx.strokeStyle = '#222'; ctx.stroke();
            });

            balls.forEach((b, i) => {
                b.x += b.vx; b.y += b.vy;
                b.vx *= 0.99; b.vy *= 0.99; // احتكاك أنعم

                if (b.x < b.r + 5 || b.x > canvas.width - b.r - 5) b.vx *= -0.8;
                if (b.y < b.r + 5 || b.y > canvas.height - b.r - 5) b.vy *= -0.8;

                drawBall(b);

                // تصادم واقعي
                for (let j = i + 1; j < balls.length; j++) {
                    let b2 = balls[j];
                    let dx = b2.x - b.x, dy = b2.y - b.y, dist = Math.hypot(dx, dy);
                    if (dist < b.r + b2.r) {
                        // معادلة تصادم بسيطة لكن فعالة
                        let angle = Math.atan2(dy, dx);
                        let speed1 = Math.hypot(b.vx, b.vy);
                        let speed2 = Math.hypot(b2.vx, b2.vy);
                        b.vx = -Math.cos(angle) * speed1;
                        b.vy = -Math.sin(angle) * speed1;
                        b2.vx = Math.cos(angle) * speed2 + Math.cos(angle) * 2;
                        b2.vy = Math.sin(angle) * speed2 + Math.sin(angle) * 2;
                    }
                }
            });
            requestAnimationFrame(update);
        }

        // تحكم الماوس
        let isDragging = false;
        canvas.onmousedown = () => isDragging = true;
        window.onmouseup = (e) => {
            if (isDragging) {
                const rect = canvas.getBoundingClientRect();
                balls[0].vx = (balls[0].x - (e.clientX - rect.left)) * 0.1;
                balls[0].vy = (balls[0].y - (e.clientY - rect.top)) * 0.1;
            }
            isDragging = false;
        };

        initGame();
        update();
    </script>
</body>
</html>